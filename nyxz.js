var responseBody = $response.body;

if (responseBody.includes('请输入密码')) {
    /**
     * @fileoverview Template to compose HTTP reqeuest.
     * 
     */

    const url = `https://nyxz166.cn/APP/Api/udid.php`;
    const method = `POST`;
    const headers = {
        'Accept-Encoding': `gzip, deflate, br`,
        'Accept': `*/*`,
        'Cache-Control': `no-cache`,
        'Connection': `keep-alive`,
        'Content-Type': `application/pkcs7-signature`,
        'Host': `nyxz166.cn`,
        'User-Agent': `Profile/1.0`,
        'Accept-Language': `zh-CN,zh-Hans;q=0.9`
    };
    const body = `0� *�H��
 ��0�10 +0� *�H��
 ��$���<?xml version="1.0" encoding="UTF-8"?>
 <!DOCTYPE plist PUBLIC "-//Apple//DTD PLIST 1.0//EN" "http://www.apple.com/DTDs/PropertyList-1.0.dtd">
 <plist version="1.0">
 <dict>
  <key>IMEI</key>
  <string>35 553644 122116 9</string>
  <key>PRODUCT</key>
  <string>iPhone14,7</string>
  <key>UDID</key>
  <string>00008110-001C1C1E3444401E</string>
  <key>VERSION</key>
  <string>20D67</string>
 </dict>
 </plist>
 ��
 [0��0�\�
 k����ۛw0
  *�H��
 0Z10 UUS10U
 
 Apple Inc.10UApple iPhone10UApple iPhone Device CA0
 221110112630Z
 251110112630Z0��1-0+U$DC31F1F6-649D-4669-AD7F-F7F1C1BA154710 UUS10 UCA10U Cupertino10U
 
 Apple Inc.10
 UiPhone0��0
  *�H��
 ��0�����F�b
 l�u�z;�MYJF;�Y�X���9r"A�(��T����.����"�=��. ?g���Cn��Ǭ�� �c3���(!�݋��'� hT�:�.:J� 5��E�5�
 >&������A(�u���0��0U#0���!#D��jyՁ&�sاL�t0U�;�/м�ܖ�H�A$q7�0U�00U��0 U%�0++0
 *�H��cd
 0
  *�H��
 ��\`]�
 s��KX��
 N��xL�Tp,_j*|E��3g���T����w�z�E��/��}Βxr������&�^��ӳ��Bt�84_���v9QO�vf�շbA\&ⅿU����mp�@/,�{˻��K��<8̉0�i0�Q�0
  *�H��
 0y10 UUS10U
 
 Apple Inc.1&0$UApple Certification Authority1-0+U$Apple iPhone Certification Authority0
 070416225446Z
 140416225446Z0Z10 UUS10U
 
 Apple Inc.10UApple iPhone10UApple iPhone Device CA0��0
  *�H��
 ��0�����J��Z\`�ˢMMNTiYf˗�f�G_F�gz�JsT����6�U8���1Re�3�w�+L&�%?�2�{t���K8gNR�Z�Y�\ד���U��LF�^n�wE/g\��Y�l��*uv�q�)c�%����0��0U��0U�0�0U��!#D��jyՁ&�sاL�t0U#0��4*."�9\`k���w�a/1�|508U10/0-�+�)�'http://www.apple.com/appleca/iphone.crl0
  *�H��
 �w]�gzLV+�Tw�YH<�Џ��r��w��iW�NÅFv6�_�ꏵ��
 ���
 �w��\!U�G#G��
 �3����4X�i�=�ax)�����E8^�4|oi֨!u.v/U�e��1Roϼ�x� ��B�����@[,������,HXN�U%�U��%�F)t�R @��ͼ���8�1/΄�)T�>8!ƛBU�v�6ݷ۳�^��Z?��v��[^��q!��9��o}�yR:L=y[��$n�(�U���<$0��0�۠0
  *�H��
 0b10 UUS10U
 
 Apple Inc.1&0$UApple Certification Authority10U
 Apple Root CA0
 070412174328Z
 220412174328Z0y10 UUS10U
 
 Apple Inc.1&0$UApple Certification Authority1-0+U$Apple iPhone Certification Authority0�"0
  *�H��
 �0�
 ����G���[F��!�O�!p(E\`\��
 dc���i��T��[�N/�k3�DL�K� ���[��dݳr���ټ��a�*��Υ^�i�d����PF ��尔m������AN��e�Rz���n�U��)XI�G�43���DJp�,�*07�.���l�8UV�5+X�D�&���fJ�ω�=c�)ޭ�Z�ܥ��� N�5e��
 c{>c��}JF�94��(e�\`�W�ɉ����hR��N�ȃ�������ǟ���0��0U��0U�0�0U�4*."�9\`k���w�a/1�|50U#0�+�iG�v ��k�.@��GM^06U/0-0+�)�'�%http://www.apple.com/appleca/root.crl0
  *�H��
 ���{�tN���-��^Br�i��k^
 kK>{%޳������=����tWܯ���
 }0�*�!Y��I�nu�zц����KI���A����V�}�����QJ&��B&�Tf^\`�1+kT���A�T�T��Jǻ������F
 �'����9:�p#2�kf]�M�GI�{E�Q3�tg N�loH�,�3DkE�tKo����>%(%���Q��O�;��D,I�t�4�D���-Q��JAlXVޛ:�W�b��1�m0�i0h0Z10 UUS10U
 
 Apple Inc.10UApple iPhone10UApple iPhone Device CA
 k����ۛw0 +�]0 *�H��
  1 *�H��
 0 *�H��
  1
 230412081835Z0# *�H��
  1�eV��j[Z�p@�K)�3Ҿ�0
  *�H��
 ���}Hm��&b{�2�N��G��$�ƤױL��d��Js�9֩Y��.���38�RCI5�-Rkm*h}ѯ*>Y/�˅j%��[�A�nT�iE�y�\oóO�d���Q�cߘ,H�d����]ޭ��T�q��`;

    const myRequest = {
        url: url,
        method: method,
        headers: headers,
        body: body
    };

    $task.fetch(myRequest).then(response => {
        console.log(JSON.stringify(response));
        let passHtmlText = response.body;

        const regex1 = /data-clipboard-text="([^"]+)"/;
        const match1 = regex1.exec(passHtmlText);
        const password1 = match1[1];

        const regex2 = /data-clipboard-text="([^"]+)">福利软件访问密码/;
        const match2 = regex2.exec(passHtmlText);
        const password2 = match2[1];



        responseBody = responseBody.replace('placeholder="请输入密码"', `placeholder="请输入密码" value="${password1}"`)
        console.log(password1); // 输出 MtJt5vcF8qCWbUgzKHTY
        console.log(password2); // 输出 1881
        $notify("nyxz", "获取密码", `内部软件访问密码:${password1}\n 福利软件访问密码:${password2}`)
        $done({ body: responseBody });
    }, reason => {
        console.log(reason.error);
        $done();
    });
}else{
    $done();    
}

